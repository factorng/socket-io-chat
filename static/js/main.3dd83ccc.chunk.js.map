{"version":3,"sources":["store/reducers/rootReducer.js","store/store.js","store/actions/actions.js","components/Join.js","components/Message.js","components/AddMessage.js","components/Header.js","components/Chat.js","components/JoinByLink.js","history.js","App.js","index.js"],"names":["rootReducer","state","action","type","user","payload","store","createStore","set_user","value","Join","location","useState","name","setName","room","setRoom","dispatch","useDispatch","history","useHistory","className","onSubmit","event","preventDefault","push","placeholder","onChange","target","onInput","Message","userName","messageText","isYourMessage","time","Date","toTimeString","split","AddMessage","sendMessage","message","setMessage","Header","users","length","map","i","id","onClick","socket","Chat","setUsers","messages","setMessages","useSelector","useEffect","querystring","parse","search","io","emit","disconnect","off","on","to","msg","text","createBrowserHistory","App","path","exact","component","JoinByLink","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3dd83ccc.chunk.js","sourcesContent":["function rootReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SET\":\r\n      return { user: action.payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport default rootReducer;\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers/rootReducer\";\r\n\r\nconst initialState = { user: \"\" };\r\n\r\nconst store = createStore(rootReducer, initialState);\r\n\r\nexport default store;\r\n","export function set_user(value) {\r\n  return {\r\n    type: \"SET\",\r\n    payload: value,\r\n  };\r\n}\r\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { set_user } from \"../store/actions/actions\";\nimport \"./Join.css\";\n\nexport default function Join({ location }) {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const submitHandler = (event) => {\n    if (!name || !room) event.preventDefault();\n    dispatch(set_user(name));\n    history.push(`/chat?room=${room}`);\n  };\n\n  return (\n    <div className=\"join-wrapper\">\n      <form className=\"join\" onSubmit={submitHandler}>\n        <h1 className=\"join__header\">Join to the chat</h1>\n        <label className=\"join__input-label\">Enter your name</label>\n        <input\n          placeholder=\"Name\"\n          type=\"text\"\n          onChange={(event) => setName(event.target.value)}\n        />\n        <label className=\"join__input-label\">Enter a room name</label>\n        <input\n          placeholder=\"Room\"\n          type=\"text\"\n          onInput={(event) => setRoom(event.target.value)}\n        />\n        <button className=\"join__button\" type=\"submit\">\n          Join\n        </button>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./Message.css\";\n\nexport default function Message({\n  userName,\n  messageText,\n  isYourMessage,\n  time,\n}) {\n  const dateFormate = () => {\n    const date = new Date(time);\n    return date.toTimeString().split(\" \")[0];\n  };\n  return (\n    <div className=\"chat-message\">\n      <div\n        className={\n          isYourMessage ? \"chat-user  chat-user_your-message\" : \"chat-user\"\n        }\n      >\n        <p className=\"chat-user__name\">{userName}</p>\n        <p className=\"chat-message__time\">{dateFormate()}</p>\n      </div>\n      <p\n        className={\n          isYourMessage\n            ? \"chat-message__content chat-message__content_your-message\"\n            : \"chat-message__content\"\n        }\n      >\n        {messageText}\n      </p>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport \"./AddMessage.css\";\n\nexport default function AddMessage({ sendMessage }) {\n  const [message, setMessage] = useState(\"\");\n  return (\n    <div className=\"add-message\">\n      <form\n        className=\"form-add-message\"\n        onSubmit={(event) => {\n          sendMessage(event, message);\n          setMessage(\"\");\n        }}\n      >\n        <input\n          className=\"form-add-message__input\"\n          value={message}\n          onChange={(event) => setMessage(event.target.value)}\n        />\n        <button className=\"form-add-message__button\" type=\"submit\">\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Header.css\";\n\nexport default function Header({ users, room }) {\n  const history = useHistory();\n  return (\n    <header className=\"header\">\n      <div className=\"header__users\">\n        {`In the room \"${room}\" ${users.length} users online: `}\n        {users.map((user, i) => (\n          <span key={user.id}>\n            <span className=\"header__user\">{user.name}</span>\n            {users.length > 1 && i < users.length - 1 && \", \"}\n          </span>\n        ))}\n      </div>\n      <button onClick={() => history.push(\"/\")} className=\"header__button\">\n        Log out\n      </button>\n    </header>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport querystring from \"query-string\";\nimport io from \"socket.io-client\";\nimport { useSelector } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Message from \"./Message\";\nimport AddMessage from \"./AddMessage\";\nimport \"./Chat.css\";\nimport Header from \"./Header\";\nconst ENDPOINT = \"https://socket-io-chat-456.herokuapp.com/\";\n\nlet socket;\n\nexport default function Chat({ location }) {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const [users, setUsers] = useState([]);\n  const [messages, setMessages] = useState([]);\n\n  const userName = useSelector((state) => state.user);\n\n  useEffect(() => {\n    const { room } = querystring.parse(location.search);\n    socket = io(ENDPOINT);\n    setName(userName);\n    setRoom(room);\n    socket.emit(\"join\", { name: userName, room }, () => {});\n\n    return () => {\n      socket.disconnect();\n      socket.off();\n    };\n  }, [location.search, userName]);\n\n  useEffect(() => {\n    socket.on(\"message\", (message) => {\n      setMessages([...messages, message]);\n    });\n    socket.on(\"roomData\", ({ users }) => {\n      setUsers(users);\n    });\n  }, [messages, users]);\n\n  function sendMessage(event, message) {\n    event.preventDefault();\n    if (message) socket.emit(\"sendMessage\", message, () => {});\n  }\n\n  return (\n    <>\n      {room && !userName && <Redirect to={`/joinByLink?room=${room}`} />}\n      <div className=\"chat-wrapper\">\n        <Header users={users} room={room} />\n        <div className=\"chat-messages-wrapper\">\n          {messages.map((msg) => (\n            <Message\n              key={msg.user + msg.text}\n              userName={msg.user}\n              messageText={msg.text}\n              isYourMessage={msg.user === name}\n              time={msg.time}\n            />\n          ))}\n        </div>\n\n        <AddMessage sendMessage={sendMessage} />\n      </div>\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport querystring from \"query-string\";\nimport { useDispatch } from \"react-redux\";\nimport { set_user } from \"../store/actions/actions\";\nimport \"./JoinByLink.css\";\n\nexport default function Join({ location }) {\n  const [name, setName] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useEffect(() => {\n    const { room } = querystring.parse(location.search);\n    if (room) setRoom(room);\n  }, [location.search]);\n\n  const submitHandler = (event) => {\n    if (!name || !room) event.preventDefault();\n    dispatch(set_user(name));\n    history.push(`/chat?room=${room}`);\n  };\n\n  return (\n    <div className=\"join-by-link-wrapper\">\n      <form className=\"join-by-link\" onSubmit={submitHandler}>\n        <h1 className=\"join-by-link__header\">\n          You has joined to the room \"{room}\"\n        </h1>\n        <label className=\"join-by-link__input-label\">Enter your name</label>\n        <input\n          placeholder=\"Name\"\n          type=\"text\"\n          onChange={(event) => setName(event.target.value)}\n        />\n        <button className=\"join-by-link__button\" type=\"submit\">\n          Join\n        </button>\n      </form>\n    </div>\n  );\n}\n","import { createBrowserHistory } from \"history\";\n\nexport default createBrowserHistory();\n","import React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Join from \"./components/Join\";\nimport Chat from \"./components/Chat\";\nimport JoinByLink from \"./components/JoinByLink\";\nimport history from \"./history\";\nimport \"./App.css\";\n\nexport default function App() {\n  return (\n    <Router history={history}>\n      <Route path=\"/\" exact component={Join} />\n      <Route path=\"/join\" exact component={Join} />\n      <Route path=\"/joinByLink\" component={JoinByLink} />\n      <Route path=\"/chat\" component={Chat} />\n    </Router>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}