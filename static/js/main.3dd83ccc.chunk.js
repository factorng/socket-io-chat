(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(24),r=n.n(s),o=n(14),i=n(55);var u=function(e,t){switch(t.type){case"SET":return{user:t.payload};default:return e}},j=Object(i.a)(u,{user:""}),b=n(16),l=n(3),m=n(6);function h(e){return{type:"SET",payload:e}}n(63);var O=n(1);function d(e){e.location;var t=Object(c.useState)(""),n=Object(m.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(m.a)(r,2),u=i[0],j=i[1],b=Object(o.b)(),d=Object(l.f)();return Object(O.jsx)("div",{className:"join-wrapper",children:Object(O.jsxs)("form",{className:"join",onSubmit:function(e){a&&u||e.preventDefault(),b(h(a)),d.push("/chat?room=".concat(u))},children:[Object(O.jsx)("h1",{className:"join__header",children:"Join to the chat"}),Object(O.jsx)("label",{className:"join__input-label",children:"Enter your name"}),Object(O.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return s(e.target.value)}}),Object(O.jsx)("label",{className:"join__input-label",children:"Enter a room name"}),Object(O.jsx)("input",{placeholder:"Room",type:"text",onInput:function(e){return j(e.target.value)}}),Object(O.jsx)("button",{className:"join__button",type:"submit",children:"Join"})]})})}var p=n(54),f=n(27),x=n.n(f),_=n(53),g=n.n(_);n(102);function v(e){var t=e.userName,n=e.messageText,c=e.isYourMessage,a=e.time;return Object(O.jsxs)("div",{className:"chat-message",children:[Object(O.jsxs)("div",{className:c?"chat-user  chat-user_your-message":"chat-user",children:[Object(O.jsx)("p",{className:"chat-user__name",children:t}),Object(O.jsx)("p",{className:"chat-message__time",children:new Date(a).toTimeString().split(" ")[0]})]}),Object(O.jsx)("p",{className:c?"chat-message__content chat-message__content_your-message":"chat-message__content",children:n})]})}n(103);function N(e){var t=e.sendMessage,n=Object(c.useState)(""),a=Object(m.a)(n,2),s=a[0],r=a[1];return Object(O.jsx)("div",{className:"add-message",children:Object(O.jsxs)("form",{className:"form-add-message",onSubmit:function(e){t(e,s),r("")},children:[Object(O.jsx)("input",{className:"form-add-message__input",value:s,onChange:function(e){return r(e.target.value)}}),Object(O.jsx)("button",{className:"form-add-message__button",type:"submit",children:"Send"})]})})}n(104),n(105);function y(e){var t=e.users,n=e.room,c=Object(l.f)();return Object(O.jsxs)("header",{className:"header",children:[Object(O.jsxs)("div",{className:"header__users",children:['In the room "'.concat(n,'" ').concat(t.length," users online: "),t.map((function(e,n){return Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{className:"header__user",children:e.name}),t.length>1&&n<t.length-1&&", "]},e.id)}))]}),Object(O.jsx)("button",{onClick:function(){return c.push("/")},className:"header__button",children:"Log out"})]})}var S;function k(e){var t=e.location,n=Object(c.useState)(""),a=Object(m.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(""),u=Object(m.a)(i,2),j=u[0],b=u[1],h=Object(c.useState)([]),d=Object(m.a)(h,2),f=d[0],_=d[1],k=Object(c.useState)([]),E=Object(m.a)(k,2),w=E[0],M=E[1],D=Object(o.c)((function(e){return e.user}));return Object(c.useEffect)((function(){var e=x.a.parse(t.search).room;return S=g()("https://socket-io-chat-456.herokuapp.com/"),r(D),b(e),S.emit("join",{name:D,room:e},(function(){})),function(){S.disconnect(),S.off()}}),[t.search,D]),Object(c.useEffect)((function(){S.on("message",(function(e){M([].concat(Object(p.a)(w),[e]))})),S.on("roomData",(function(e){var t=e.users;_(t)}))}),[w,f]),Object(O.jsxs)(O.Fragment,{children:[j&&!D&&Object(O.jsx)(l.a,{to:"/joinByLink?room=".concat(j)}),Object(O.jsxs)("div",{className:"chat-wrapper",children:[Object(O.jsx)(y,{users:f,room:j}),Object(O.jsx)("div",{className:"chat-messages-wrapper",children:w.map((function(e){return Object(O.jsx)(v,{userName:e.user,messageText:e.text,isYourMessage:e.user===s,time:e.time},e.user+e.text)}))}),Object(O.jsx)(N,{sendMessage:function(e,t){e.preventDefault(),t&&S.emit("sendMessage",t,(function(){}))}})]})]})}n(106);function E(e){var t=e.location,n=Object(c.useState)(""),a=Object(m.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(""),u=Object(m.a)(i,2),j=u[0],b=u[1],d=Object(o.b)(),p=Object(l.f)();Object(c.useEffect)((function(){var e=x.a.parse(t.search).room;e&&b(e)}),[t.search]);return Object(O.jsx)("div",{className:"join-by-link-wrapper",children:Object(O.jsxs)("form",{className:"join-by-link",onSubmit:function(e){s&&j||e.preventDefault(),d(h(s)),p.push("/chat?room=".concat(j))},children:[Object(O.jsxs)("h1",{className:"join-by-link__header",children:['You has joined to the room "',j,'"']}),Object(O.jsx)("label",{className:"join-by-link__input-label",children:"Enter your name"}),Object(O.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)("button",{className:"join-by-link__button",type:"submit",children:"Join"})]})})}var w=n(5),M=Object(w.a)();n(107);function D(){return Object(O.jsxs)(b.a,{history:M,children:[Object(O.jsx)(l.b,{path:"/",exact:!0,component:d}),Object(O.jsx)(l.b,{path:"/join",exact:!0,component:d}),Object(O.jsx)(l.b,{path:"/joinByLink",component:E}),Object(O.jsx)(l.b,{path:"/chat",component:k})]})}n(108);r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(o.a,{store:j,children:Object(O.jsx)(D,{})})}),document.getElementById("root"))},63:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.3dd83ccc.chunk.js.map