(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(23),r=n.n(a),o=n(13),i=n(54);var u=function(e,t){switch(t.type){case"SET":return{user:t.payload};default:return e}},j=Object(i.a)(u,{user:""}),b=n(109),l=n(3);function h(e){return{type:"SET",payload:e}}n(62);var m=n(1);function d(e){e.location;var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),u=i[0],j=i[1],d=Object(o.b)(),O=Object(b.e)();return Object(m.jsx)("div",{className:"join-wrapper",children:Object(m.jsxs)("form",{className:"join",onSubmit:function(e){s&&u||e.preventDefault(),d(h(s)),O.push("/chat?room=".concat(u))},children:[Object(m.jsx)("h1",{className:"join__header",children:"Join to the chat"}),Object(m.jsx)("label",{className:"join__input-label",children:"Enter your name"}),Object(m.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return a(e.target.value)}}),Object(m.jsx)("label",{className:"join__input-label",children:"Enter a room name"}),Object(m.jsx)("input",{placeholder:"Room",type:"text",onInput:function(e){return j(e.target.value)}}),Object(m.jsx)("button",{className:"join__button",type:"submit",children:"Join"})]})})}var O=n(53),p=n(26),f=n.n(p),x=n(52),g=n.n(x);n(101);function _(e){var t=e.userName,n=e.messageText,c=e.isYourMessage,s=e.time;return Object(m.jsxs)("div",{className:"chat-message",children:[Object(m.jsxs)("div",{className:c?"chat-user  chat-user_your-message":"chat-user",children:[Object(m.jsx)("p",{className:"chat-user__name",children:t}),Object(m.jsx)("p",{className:"chat-message__time",children:new Date(s).toTimeString().split(" ")[0]})]}),Object(m.jsx)("p",{className:c?"chat-message__content chat-message__content_your-message":"chat-message__content",children:n})]})}n(102);function v(e){var t=e.sendMessage,n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],r=s[1];return Object(m.jsx)("div",{className:"add-message",children:Object(m.jsxs)("form",{className:"form-add-message",onSubmit:function(e){t(e,a),r("")},children:[Object(m.jsx)("input",{className:"form-add-message__input",value:a,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("button",{className:"form-add-message__button",type:"submit",children:"Send"})]})})}n(103),n(104);function N(e){var t=e.users,n=e.room,c=Object(b.e)();return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsxs)("div",{className:"header__users",children:['In the room "'.concat(n,'" ').concat(t.length," users online: "),t.map((function(e,n){return Object(m.jsxs)("span",{children:[Object(m.jsx)("span",{className:"header__user",children:e.name}),t.length>1&&n<t.length-1&&", "]},e.id)}))]}),Object(m.jsx)("button",{onClick:function(){return c.push("/")},className:"header__button",children:"Log out"})]})}var y;function S(e){var t=e.location,n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(""),u=Object(l.a)(i,2),j=u[0],h=u[1],d=Object(c.useState)([]),p=Object(l.a)(d,2),x=p[0],S=p[1],k=Object(c.useState)([]),E=Object(l.a)(k,2),w=E[0],M=E[1],D=Object(o.c)((function(e){return e.user}));return Object(c.useEffect)((function(){var e=f.a.parse(t.search).room;return y=g()("https://socket-io-chat-456.herokuapp.com/"),r(D),h(e),y.emit("join",{name:D,room:e},(function(){})),function(){y.disconnect(),y.off()}}),[t.search,D]),Object(c.useEffect)((function(){y.on("message",(function(e){M([].concat(Object(O.a)(w),[e]))})),y.on("roomData",(function(e){var t=e.users;S(t)}))}),[w,x]),Object(m.jsxs)(m.Fragment,{children:[j&&!D&&Object(m.jsx)(b.a,{to:"/joinByLink?room=".concat(j)}),Object(m.jsxs)("div",{className:"chat-wrapper",children:[Object(m.jsx)(N,{users:x,room:j}),Object(m.jsx)("div",{className:"chat-messages-wrapper",children:w.map((function(e){return Object(m.jsx)(_,{userName:e.user,messageText:e.text,isYourMessage:e.user===a,time:e.time},e.user+e.text)}))}),Object(m.jsx)(v,{sendMessage:function(e,t){e.preventDefault(),t&&y.emit("sendMessage",t,(function(){}))}})]})]})}n(105);function k(e){var t=e.location,n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(""),u=Object(l.a)(i,2),j=u[0],d=u[1],O=Object(o.b)(),p=Object(b.e)();Object(c.useEffect)((function(){var e=f.a.parse(t.search).room;e&&d(e)}),[t.search]);return Object(m.jsx)("div",{className:"join-by-link-wrapper",children:Object(m.jsxs)("form",{className:"join-by-link",onSubmit:function(e){a&&j||e.preventDefault(),O(h(a)),p.push("/chat?room=".concat(j))},children:[Object(m.jsxs)("h1",{className:"join-by-link__header",children:['You has joined to the room "',j,'"']}),Object(m.jsx)("label",{className:"join-by-link__input-label",children:"Enter your name"}),Object(m.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return r(e.target.value)}}),Object(m.jsx)("button",{className:"join-by-link__button",type:"submit",children:"Join"})]})})}var E=n(11),w=Object(E.a)();n(106);function M(){return Object(m.jsx)(b.c,{history:w,children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{path:"https://factorng.github.io/socket-io-chat/",exact:!0,component:d}),Object(m.jsx)(b.b,{path:"https://factorng.github.io/socket-io-chat/joinByLink",component:k}),Object(m.jsx)(b.b,{path:"https://factorng.github.io/socket-io-chat/chat",component:S})]})})}n(107);r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(o.a,{store:j,children:Object(m.jsx)(M,{})})}),document.getElementById("root"))},62:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.3cd9448d.chunk.js.map