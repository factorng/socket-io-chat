(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(23),r=n.n(a),o=n(13),i=n(54);var u=function(e,t){switch(t.type){case"SET":return{user:t.payload};default:return e}},j=Object(i.a)(u,{user:""}),l=n(110),b=n(3);function m(e){return{type:"SET",payload:e}}n(62);var h=n(1);function d(e){e.location;var t=Object(c.useState)(""),n=Object(b.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),i=Object(b.a)(r,2),u=i[0],j=i[1],d=Object(o.b)(),O=Object(l.e)();return Object(h.jsx)("div",{className:"join-wrapper",children:Object(h.jsxs)("form",{className:"join",onSubmit:function(e){e.preventDefault(),s&&u&&(d(m(s)),O.push("/chat?room=".concat(u)))},children:[Object(h.jsx)("h1",{className:"join__header",children:"Join to the chat"}),Object(h.jsx)("label",{className:"join__input-label",children:"Enter your name"}),Object(h.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("label",{className:"join__input-label",children:"Enter a room name"}),Object(h.jsx)("input",{placeholder:"Room",type:"text",onInput:function(e){return j(e.target.value)}}),Object(h.jsx)("button",{className:"join__button",type:"submit",children:"Join"})]})})}var O=n(53),f=n(26),p=n.n(f),x=n(52),g=n.n(x);n(101);function _(e){var t=e.userName,n=e.messageText,c=e.isYourMessage,s=e.time;return Object(h.jsxs)("div",{className:"chat-message",children:[Object(h.jsxs)("div",{className:c?"chat-user  chat-user_your-message":"chat-user",children:[Object(h.jsx)("p",{className:"chat-user__name",children:t}),Object(h.jsx)("p",{className:"chat-message__time",children:new Date(s).toTimeString().split(" ")[0]})]}),Object(h.jsx)("p",{className:c?"chat-message__content chat-message__content_your-message":"chat-message__content",children:n})]})}n(102);function v(e){var t=e.sendMessage,n=Object(c.useState)(""),s=Object(b.a)(n,2),a=s[0],r=s[1];return Object(h.jsx)("div",{className:"add-message",children:Object(h.jsxs)("form",{className:"form-add-message",onSubmit:function(e){e.preventDefault(),t(a.trim()),r("")},children:[Object(h.jsx)("input",{className:"form-add-message__input",value:a,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("button",{className:"form-add-message__button",type:"submit",children:"Send"})]})})}n(103);var N=function(){return Object(h.jsx)("section",{className:"preloader",children:Object(h.jsx)("i",{className:"circle-preloader"})})};n(104),n(105);function y(e){var t=e.users,n=e.room,c=Object(l.e)();return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsxs)("div",{className:"header__users",children:['In the room "'.concat(n,'" ').concat(t.length," users online: "),t.map((function(e,n){return Object(h.jsxs)("span",{children:[Object(h.jsx)("span",{className:"header__user",children:e.name}),t.length>1&&n<t.length-1&&", "]},e.id)}))]}),Object(h.jsx)("button",{onClick:function(){return c.push("/")},className:"header__button",children:"Log out"})]})}function S(e){var t=e.location,n=Object(c.useState)(""),a=Object(b.a)(n,2),r=a[0],i=a[1],u=Object(c.useState)(""),j=Object(b.a)(u,2),m=j[0],d=j[1],f=Object(c.useState)([]),x=Object(b.a)(f,2),S=x[0],k=x[1],E=Object(c.useState)([]),w=Object(b.a)(E,2),M=w[0],T=w[1],D=Object(c.useState)(!0),J=Object(b.a)(D,2),C=J[0],B=J[1],I=s.a.useRef(null),L=s.a.useRef(g()("https://socket-io-chat-456.herokuapp.com/")),R=Object(o.c)((function(e){return e.user}));return Object(c.useEffect)((function(){var e=p.a.parse(t.search).room;return i(R),d(e),L.current.emit("join",{name:R,room:e},(function(){})),L.current.on("message",(function(e){T((function(t){return[].concat(Object(O.a)(t),[e])})),I.current.scrollTo({top:I.current.scrollHeight,left:0,behavior:"smooth"})})),L.current.on("roomData",(function(e){var t=e.users;k(t)})),function(){L.current.disconnect(),L.current.off()}}),[t.search,R]),Object(c.useEffect)((function(){L.current.connected&&B(!1)}),[L.current.connected]),Object(h.jsxs)(h.Fragment,{children:[m&&!R&&Object(h.jsx)(l.a,{to:"/joinByLink?room=".concat(m)}),Object(h.jsxs)("div",{className:"chat-wrapper",children:[Object(h.jsx)(y,{users:S,room:m}),Object(h.jsx)("div",{className:"chat-messages-wrapper",ref:I,children:C?Object(h.jsx)(N,{}):Object(h.jsx)(h.Fragment,{children:M.map((function(e,t){return Object(h.jsx)(_,{userName:e.user,messageText:e.text,isYourMessage:e.user===r,time:e.time},t)}))})}),Object(h.jsx)(v,{sendMessage:function(e){e&&L.current.emit("sendMessage",e,(function(){}))}})]})]})}n(106);function k(e){var t=e.location,n=Object(c.useState)(""),s=Object(b.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(""),u=Object(b.a)(i,2),j=u[0],d=u[1],O=Object(o.b)(),f=Object(l.e)();Object(c.useEffect)((function(){var e=p.a.parse(t.search).room;e&&d(e)}),[t.search]);return Object(h.jsx)("div",{className:"join-by-link-wrapper",children:Object(h.jsxs)("form",{className:"join-by-link",onSubmit:function(e){e.preventDefault(),a&&j&&(O(m(a)),f.push("/chat?room=".concat(j)))},children:[Object(h.jsxs)("h1",{className:"join-by-link__header",children:['You has joined to the room "',j,'"']}),Object(h.jsx)("label",{className:"join-by-link__input-label",children:"Enter your name"}),Object(h.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("button",{className:"join-by-link__button",type:"submit",children:"Join"})]})})}var E=n(11),w=Object(E.a)();n(107);function M(){return Object(h.jsx)(l.c,{history:w,children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",exact:!0,component:d}),Object(h.jsx)(l.b,{path:"/joinByLink",component:k}),Object(h.jsx)(l.b,{path:"/chat",component:S})]})})}n(108);r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(o.a,{store:j,children:Object(h.jsx)(M,{})})}),document.getElementById("root"))},62:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.f2be0485.chunk.js.map